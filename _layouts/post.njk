---
layout: base.njk
---

<article class="prose-muted">
  <header class="mb-12">
    <h1 class="text-4xl md:text-5xl font-semibold tracking-tight mb-6 leading-tight">{{ title }}</h1>

    <div class="blog-post-meta">
      <time datetime="{{ date | dateFormat('iso') }}" class="flex items-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
        </svg>
        {{ date | dateFormat }}
      </time>

      <span id="reading-time" class="flex items-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <span>Calculating...</span>
      </span>

      {% if tags and tags.length > 0 %}
        <div class="flex flex-wrap gap-2">
          {% for tag in tags %}
            {% if tag != "blog" %}
              <span class="px-3 py-1 bg-muted-light-bg-accent dark:bg-muted-bg-accent text-muted-light-text-tertiary dark:text-muted-text-tertiary text-xs rounded-full font-medium">
                {{ tag }}
              </span>
            {% endif %}
          {% endfor %}
        </div>
      {% endif %}
    </div>

    {% if featured_image %}
    <div class="rounded-xl overflow-hidden shadow-sm border border-muted-light-bg-accent dark:border-muted-bg-accent mt-8">
      <img src="{{ featured_image }}" alt="{{ title }}" class="w-full h-auto">
    </div>
    {% endif %}
  </header>

  <div class="prose prose-lg max-w-none
              prose-headings:text-muted-light-text-primary dark:prose-headings:text-muted-text-primary
              prose-headings:font-semibold prose-headings:tracking-tight
              prose-p:text-muted-light-text-secondary dark:prose-p:text-muted-text-secondary
              prose-p:leading-relaxed prose-p:mb-6
              prose-a:text-muted-stone-dark dark:prose-a:text-muted-stone-light
              prose-a:no-underline hover:prose-a:underline prose-a:underline-offset-2
              prose-strong:text-muted-light-text-primary dark:prose-strong:text-muted-text-primary
              prose-strong:font-semibold
              prose-code:text-muted-clay-dark dark:prose-code:text-muted-clay-light
              prose-code:bg-muted-light-bg-tertiary dark:prose-code:bg-muted-bg-tertiary
              prose-code:px-2 prose-code:py-1 prose-code:rounded-md prose-code:text-sm
              prose-pre:bg-muted-light-bg-tertiary dark:prose-pre:bg-muted-bg-tertiary
              prose-pre:border prose-pre:border-muted-light-bg-accent dark:prose-pre:border-muted-bg-accent
              prose-blockquote:border-muted-sage dark:prose-blockquote:border-muted-sage-light
              prose-blockquote:bg-muted-light-bg-secondary dark:prose-blockquote:bg-muted-bg-secondary
              prose-blockquote:text-muted-light-text-secondary dark:prose-blockquote:text-muted-text-secondary
              prose-blockquote:rounded-r-lg prose-blockquote:py-2
              prose-ul:text-muted-light-text-secondary dark:prose-ul:text-muted-text-secondary
              prose-ol:text-muted-light-text-secondary dark:prose-ol:text-muted-text-secondary
              prose-li:mb-2">
    {{ content | safe }}
  </div>

  <!-- Article footer -->
  <footer class="mt-16 pt-8 border-t border-muted-light-bg-accent dark:border-muted-bg-accent">
    <!-- Social sharing -->
    <div class="flex items-center justify-between flex-wrap gap-4 mb-8">
      <div class="flex items-center space-x-4">
        <span class="text-sm text-muted-light-text-tertiary dark:text-muted-text-tertiary font-medium">Share this post:</span>
        <button onclick="shareOnTwitter()" class="btn-subtle text-sm">
          <svg class="h-4 w-4 mr-2 inline" fill="currentColor" viewBox="0 0 24 24">
            <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
          </svg>
          Twitter
        </button>
        <button onclick="copyToClipboard()" class="btn-subtle text-sm">
          <svg class="h-4 w-4 mr-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
          </svg>
          Copy Link
        </button>
      </div>
    </div>

    <!-- Navigation -->
    <nav class="flex flex-col md:flex-row justify-between items-start md:items-center gap-6">
      <div class="flex flex-col sm:flex-row gap-4">
        {%- if collections.blog %}
          {%- set previousPost = collections.blog | getPreviousCollectionItem %}
          {%- set nextPost = collections.blog | getNextCollectionItem %}

          {%- if previousPost %}
            <a href="{{ previousPost.url }}" class="btn-secondary flex items-center group">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2 group-hover:-translate-x-1 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
              </svg>
              <div class="text-left">
                <div class="text-xs text-muted-light-text-tertiary dark:text-muted-text-tertiary">Previous</div>
                <div class="font-medium">{{ previousPost.data.title }}</div>
              </div>
            </a>
          {%- endif %}

          {%- if nextPost %}
            <a href="{{ nextPost.url }}" class="btn-secondary flex items-center group">
              <div class="text-right">
                <div class="text-xs text-muted-light-text-tertiary dark:text-muted-text-tertiary">Next</div>
                <div class="font-medium">{{ nextPost.data.title }}</div>
              </div>
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-2 group-hover:translate-x-1 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
              </svg>
            </a>
          {%- endif %}
        {%- endif %}
      </div>

      <a href="/blog/" class="btn-primary flex items-center group">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2 group-hover:-translate-x-1 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M11 17l-5-5m0 0l5-5m-5 5h12" />
        </svg>
        All Posts
      </a>
    </nav>
  </footer>
</article>

<script>
  // Calculate reading time
  function calculateReadingTime() {
    const article = document.querySelector('article .prose');
    const text = article.textContent || article.innerText || '';
    const wordsPerMinute = 200;
    const wordCount = text.trim().split(/\s+/).length;
    const readingTime = Math.ceil(wordCount / wordsPerMinute);
    document.getElementById('reading-time').querySelector('span').textContent = `${readingTime} min read`;
  }

  // Share functions
  function shareOnTwitter() {
    const url = encodeURIComponent(window.location.href);
    const text = encodeURIComponent(document.title);
    window.open(`https://twitter.com/intent/tweet?url=${url}&text=${text}`, '_blank');
  }

  function copyToClipboard() {
    navigator.clipboard.writeText(window.location.href).then(() => {
      // Create a subtle notification
      const notification = document.createElement('div');
      notification.textContent = 'Link copied!';
      notification.className = 'fixed top-4 right-4 bg-muted-sage dark:bg-muted-sage-light text-white px-4 py-2 rounded-lg shadow-lg z-50 transition-all duration-300';
      document.body.appendChild(notification);
      setTimeout(() => {
        notification.style.opacity = '0';
        setTimeout(() => document.body.removeChild(notification), 300);
      }, 2000);
    });
  }

  // Initialize on page load
  document.addEventListener('DOMContentLoaded', calculateReadingTime);
</script>
